{"name":"Three On/Off buttons","description":"Test for relay","code":"var using = [\"DiodeCtrl\", \"SwitchCtrl\", \"SliderCtrl\", \"SvgCtrl\"];\r\nvar pin1, pin2,pin3,\r\n\tswitch1, diode1,\r\n\tswitch2, diode2,\r\n\tswitch3, diode3;\r\nvar timer1;\r\nconst TIMEOUT = 1000;\r\n\r\nfunction updateView(data){\r\n\r\n    for(var i = 0; i < data.pins.length; i++)\r\n    {\r\n        console.log(\"pin : \" + data.pins[i].pin + \r\n                    \"val : \" + data.pins[i].val);\r\n        if (data.pins[i].pin === pin1.number) {\r\n            pin1.setValue(data.pins[i].val);\r\n        }\r\n        if (data.pins[i].pin === pin2.number) {\r\n            pin2.setValue(data.pins[i].val);\r\n        }\r\n        if (data.pins[i].pin === pin3.number) {\r\n            pin3.setValue(data.pins[i].val);\r\n        }\r\n    }\r\n}\r\n\r\nfunction onClickCAllback(obj){\r\n\tvar pin = obj.pinObject;\r\n\tvar value = obj.getPinValue();\r\n\tpin.active(false);\r\n\tvar sendObj = {};\r\n\tsendObj[pin.getNumber()] = value;\r\n\tvar url = getServer()+'/devices/pins/'+ pin.savedDeviceID;\r\n\tvar posting = $.post( url, sendObj);\r\n\tposting.done(function(data){\r\n\t\tupdateView(data);\r\n\t});\r\n}\r\n\r\nfunction start(deviceId){\r\n\t\r\n\tvar url = getServer()+'/devices/pins/'+ deviceId;\r\n\tvar posting = $.get(url);\r\n\tposting.done(function(data){\r\n\t\tupdateView(data);\r\n\t});\r\n}\r\n\r\n$(function () {\r\n    \r\n\tvar deviceId = '57f8e5a35835db08808dfdb7';\r\n\tpin1    = new Pin(16, 111, deviceId, 1023, deviceId);\r\n\tpin2    = new Pin(14, 222, deviceId, 1023, deviceId);\r\n\tpin3    = new Pin(12, 333, deviceId, 1023, deviceId);\r\n\t\r\n\tvar text = new SvgCtrl('i1', 0, 0, 400, 300);\r\n\t\r\n\r\n\tdiode1  = new DiodeCtrl (75,  19, pin1);\r\n\tdiode2  = new DiodeCtrl (175, 19, pin2);\r\n\tdiode3  = new DiodeCtrl (275, 19, pin3);\r\n\t\r\n\tswitch1 = new SwitchCtrl(73,   60, pin1);\r\n\tswitch2 = new SwitchCtrl(173,   60, pin2);\r\n\tswitch3 = new SwitchCtrl(273,   60, pin3);\r\n\r\n\tpin1.active(false);\r\n\tpin2.active(false);\r\n\tpin3.active(false);\r\n\t\r\n\tswitch1.scale(0.22);\r\n    switch2.scale(0.22);\r\n    switch3.scale(0.22);\r\n\tpin1.registerClicks(onClickCAllback);\r\n\tpin2.registerClicks(onClickCAllback);\r\n\tpin3.registerClicks(onClickCAllback);\r\n\t\r\n\t\r\n\ttext.addText(62, 10,  \"Pin 1 = \"  + pin1.getNumber(), \"fill:#283438;font-size:11px;\");\r\n\ttext.addText(162, 10, \"Pin 2 = \" + pin2.getNumber(), \"fill:#283438;font-size:11px;\");\r\n\ttext.addText(262, 10, \"Pin 3 = \" + pin3.getNumber(), \"fill:#283438;font-size:11px;\");\r\n\tstart(pin1.savedDeviceID);\r\n\r\n});\r\n","helpurl":""}