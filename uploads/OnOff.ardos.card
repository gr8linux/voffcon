{"name":"OnOff","description":"Prófa on off takkann maður","code":"var using = [\"DiodeCtrl\", \"TextCtrl\", \"SwitchCtrl\", \"SliderCtrl\", \"ThermoCtrl\"];\r\nvar pin1, pin2,\r\n\tswitch1, meter1, diode1, slider1, text1;\r\nvar timer1;\r\nconst TIMEOUT = 1000;\r\n\r\nfunction updateView(data){\r\n    console.log(\"updateView(data);\");\r\n    console.log(data);\r\n    console.log(\"pin1\");console.log(pin1);\r\n    console.log(\"pin2\");console.log(pin2);\r\n    for(var i = 0; i < data.pins.length; i++)\r\n    {\r\n        console.log(\"pin : \" + data.pins[i].pin + \r\n                    \"val : \" + data.pins[i].val);\r\n        if (data.pins[i].pin === pin1.number) {\r\n            pin1.setValue(data.pins[i].val);\r\n        }\r\n        if (data.pins[i].pin === pin2.number) {\r\n            pin2.setValue(data.pins[i].val);\r\n        }\r\n    }\r\n}\r\n\r\nfunction onClickCAllback(obj){\r\n\tvar pin = obj.pinObject;\r\n\tvar value = obj.getPinValue();\r\n\tpin.active(false);\r\n\tvar sendObj = {};\r\n\tsendObj[pin.getNumber()] = value;\r\n\tvar url = getServer()+'/devices/pins/'+ pin.savedDeviceID;\r\n\tvar posting = $.post( url, sendObj);\r\n\tposting.done(function(data){\r\n\t\tupdateView(data);\r\n\t});\r\n}\r\n\r\n\r\n\r\n$(function () {\r\n    \r\n\tvar host = '57afb108b450ab9c2f820507';\r\n\tpin1    = new Pin(16, 999, host, 1023);\r\n\tpin2    = new Pin(0, 444, host, 1023);\r\n\t\r\n\ttext1   = new TextCtrl(540,3,pin1);\r\n\tdiode1  = new DiodeCtrl(100,0,pin1);\r\n\tmeter1  = new ThermoCtrl(200, 0, pin1, 25);\r\n\tswitch1 = new SwitchCtrl(300, 0, pin1);\r\n\tslider1 = new SliderCtrl(400, 0, pin1, 1023);\r\n\r\n\t\r\n\tpin2.rotate(90);\r\n\t\r\n\tpin1.active(false);\r\n\t//displays values as they are inactive.\r\n\t\r\n\tmeter1.addTicks(4);\r\n\tpin1.registerClicks(onClickCAllback);\r\n\r\n});\r\n"}